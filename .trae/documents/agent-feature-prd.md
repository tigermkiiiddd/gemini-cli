# Gemini CLI Agent åŠŸèƒ½å¼€å‘ PRD

## 1. äº§å“æ¦‚è¿°

### 1.1 äº§å“æ„¿æ™¯
Gemini CLI Agent åŠŸèƒ½æ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å¯å®šåˆ¶çš„ AI åŠ©æ‰‹èº«ä»½ç®¡ç†èƒ½åŠ›ï¼Œå…è®¸ç”¨æˆ·åˆ›å»ºã€æ¿€æ´»å’Œç®¡ç†å¤šä¸ªä¸“ä¸šåŒ–çš„ AI åŠ©æ‰‹è§’è‰²ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„å¼€å‘éœ€æ±‚ã€‚

### 1.2 æ ¸å¿ƒä»·å€¼
- **è§’è‰²ä¸“ä¸šåŒ–**ï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºé’ˆå¯¹ç‰¹å®šé¢†åŸŸï¼ˆå¦‚å‰ç«¯å¼€å‘ã€åç«¯æ¶æ„ã€DevOps ç­‰ï¼‰çš„ä¸“ä¸š AI åŠ©æ‰‹
- **ä¸Šä¸‹æ–‡æŒä¹…åŒ–**ï¼šAgent èº«ä»½åœ¨æ•´ä¸ªä¼šè¯æœŸé—´ä¿æŒä¸€è‡´ï¼Œæä¾›è¿è´¯çš„ä¸“ä¸šæŒ‡å¯¼
- **å·¥ä½œæµä¼˜åŒ–**ï¼šé€šè¿‡é¢„è®¾çš„ä¸“ä¸šè§’è‰²ï¼Œå‡å°‘é‡å¤çš„ä¸Šä¸‹æ–‡è¯´æ˜ï¼Œæé«˜å¼€å‘æ•ˆç‡

### 1.3 ç›®æ ‡ç”¨æˆ·
- **èµ„æ·±å¼€å‘è€…**ï¼šéœ€è¦åœ¨ä¸åŒæŠ€æœ¯æ ˆé—´åˆ‡æ¢çš„å…¨æ ˆå·¥ç¨‹å¸ˆ
- **å›¢é˜Ÿè´Ÿè´£äºº**ï¼šéœ€è¦é’ˆå¯¹ä¸åŒé¡¹ç›®é˜¶æ®µä½¿ç”¨ä¸åŒä¸“ä¸šè§’è‰²çš„æŠ€æœ¯é¢†å¯¼
- **ä¼ä¸šç”¨æˆ·**ï¼šéœ€è¦æ ‡å‡†åŒ– AI åŠ©æ‰‹è¡Œä¸ºä»¥ç¬¦åˆä¼ä¸šå¼€å‘è§„èŒƒçš„ç»„ç»‡

## 2. æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

### 2.1 Agent åˆ›å»ºä¸ç®¡ç†

#### 2.1.1 Agent åˆ›å»º
- **åŸºç¡€ä¿¡æ¯é…ç½®**ï¼šåç§°ã€æè¿°ã€ä¸“ä¸šé¢†åŸŸæ ‡ç­¾
- **ç³»ç»ŸæŒ‡ä»¤å®šåˆ¶**ï¼šè‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯å†…å®¹
- **æ¨¡æ¿æ”¯æŒ**ï¼šæä¾›é¢„è®¾çš„ä¸“ä¸šè§’è‰²æ¨¡æ¿ï¼ˆå‰ç«¯ä¸“å®¶ã€åç«¯æ¶æ„å¸ˆã€DevOps å·¥ç¨‹å¸ˆç­‰ï¼‰
- **æŒ‡ä»¤éªŒè¯**ï¼šç¡®ä¿è‡ªå®šä¹‰æŒ‡ä»¤çš„æ ¼å¼æ­£ç¡®æ€§å’Œå®‰å…¨æ€§

#### 2.1.2 Agent ç®¡ç†
- **åˆ—è¡¨æŸ¥çœ‹**ï¼šæ˜¾ç¤ºæ‰€æœ‰å·²åˆ›å»ºçš„ Agentï¼ŒåŒ…æ‹¬åŸºç¡€ä¿¡æ¯å’Œä½¿ç”¨ç»Ÿè®¡
- **ç¼–è¾‘ä¿®æ”¹**ï¼šæ”¯æŒä¿®æ”¹ Agent çš„åç§°ã€æè¿°å’Œç³»ç»ŸæŒ‡ä»¤
- **åˆ é™¤æ“ä½œ**ï¼šå®‰å…¨åˆ é™¤ä¸å†éœ€è¦çš„ Agent
- **å¯¼å…¥å¯¼å‡º**ï¼šæ”¯æŒ Agent é…ç½®çš„å¯¼å…¥å¯¼å‡ºï¼Œä¾¿äºå›¢é˜Ÿå…±äº«

### 2.2 Agent æ¿€æ´»ä¸åˆ‡æ¢

#### 2.2.1 Agent æ¿€æ´»
- **å‘½ä»¤æ¿€æ´»**ï¼šé€šè¿‡ `/agent activate <name>` å‘½ä»¤æ¿€æ´»æŒ‡å®š Agent
- **çŠ¶æ€æ˜¾ç¤º**ï¼šåœ¨ CLI ç•Œé¢æ˜¾ç¤ºå½“å‰æ¿€æ´»çš„ Agent ä¿¡æ¯
- **ä¼šè¯é‡ç½®**ï¼šæ¿€æ´»æ–° Agent æ—¶è‡ªåŠ¨é‡ç½®èŠå¤©ä¼šè¯ä»¥åº”ç”¨æ–°çš„ç³»ç»ŸæŒ‡ä»¤

#### 2.2.2 Agent åœç”¨
- **åœç”¨å‘½ä»¤**ï¼šé€šè¿‡ `/agent clear` å‘½ä»¤åœç”¨å½“å‰ Agent
- **é»˜è®¤æ¨¡å¼**ï¼šåœç”¨åå›åˆ°æ ‡å‡†çš„ Gemini CLI æ¨¡å¼

### 2.3 Agent æŒä¹…åŒ–

#### 2.3.1 é…ç½®å­˜å‚¨
- **æœ¬åœ°å­˜å‚¨**ï¼šAgent é…ç½®å­˜å‚¨åœ¨ç”¨æˆ·é…ç½®ç›®å½•
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ”¯æŒé…ç½®æ–‡ä»¶çš„ç‰ˆæœ¬ç®¡ç†
- **å¤‡ä»½æ¢å¤**ï¼šæä¾›é…ç½®å¤‡ä»½å’Œæ¢å¤æœºåˆ¶

#### 2.3.2 ä¼šè¯çŠ¶æ€
- **çŠ¶æ€ä¿æŒ**ï¼šAgent æ¿€æ´»çŠ¶æ€åœ¨ CLI é‡å¯åä¿æŒ
- **ä¼šè¯æ¢å¤**ï¼šæ”¯æŒæ¢å¤å¸¦æœ‰ Agent ä¸Šä¸‹æ–‡çš„å†å²ä¼šè¯

## 3. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 3.1 ç³»ç»Ÿæ¶æ„é›†æˆ

#### 3.1.1 ç³»ç»Ÿæç¤ºè¯é›†æˆ
åŸºäºç°æœ‰çš„ `getCoreSystemPrompt` æœºåˆ¶è¿›è¡Œæ‰©å±•ï¼š

```typescript
// æ‰©å±• getCoreSystemPrompt å‡½æ•°
function getCoreSystemPrompt(
  userMemory?: string, 
  agentContext?: AgentContext
): string {
  let systemPrompt = getBaseSystemPrompt();
  
  // æ³¨å…¥ Agent èº«ä»½å’ŒæŒ‡ä»¤
  if (agentContext && agentContext.isActive) {
    systemPrompt = agentContext.systemInstruction + "\n\n" + systemPrompt;
  }
  
  // é›†æˆç”¨æˆ·è®°å¿†
  if (userMemory) {
    systemPrompt += getMemorySuffix(userMemory);
  }
  
  return systemPrompt;
}
```

#### 3.1.2 ä¼šè¯ç®¡ç†é›†æˆ
ä¸ç°æœ‰çš„ `GeminiClient` å’Œä¼šè¯ç®¡ç†æœºåˆ¶æ— ç¼é›†æˆï¼š

```typescript
class AgentManager {
  private activeAgent: AgentContext | null = null;
  private geminiClient: GeminiClient;
  
  async activateAgent(agentId: string): Promise<void> {
    const agent = await this.loadAgent(agentId);
    this.activeAgent = agent;
    
    // é‡æ–°åˆå§‹åŒ–èŠå¤©ä¼šè¯ä»¥åº”ç”¨æ–°çš„ç³»ç»ŸæŒ‡ä»¤
    await this.geminiClient.resetChat();
    
    // æ›´æ–°é…ç½®æŒä¹…åŒ–
    await this.saveActiveAgentState(agentId);
  }
  
  async deactivateAgent(): Promise<void> {
    this.activeAgent = null;
    await this.geminiClient.resetChat();
    await this.clearActiveAgentState();
  }
}
```

### 3.2 å‘½ä»¤ç³»ç»Ÿæ‰©å±•

#### 3.2.1 æ–œæ å‘½ä»¤æ”¯æŒ
æ‰©å±•ç°æœ‰çš„æ–œæ å‘½ä»¤å¤„ç†å™¨ï¼š

```typescript
// åœ¨ slashCommandProcessor.ts ä¸­æ·»åŠ 
const AGENT_COMMANDS = {
  'agent': {
    'activate': handleAgentActivate,
    'clear': handleAgentClear,
    'list': handleAgentList,
    'create': handleAgentCreate,
    'edit': handleAgentEdit,
    'delete': handleAgentDelete
  }
};
```

#### 3.2.2 å‘½ä»¤å¤„ç†é€»è¾‘
```typescript
async function handleAgentActivate(
  args: string[], 
  context: CommandContext
): Promise<CommandResult> {
  const agentName = args[0];
  if (!agentName) {
    return { success: false, message: 'è¯·æŒ‡å®šè¦æ¿€æ´»çš„ Agent åç§°' };
  }
  
  try {
    await context.agentManager.activateAgent(agentName);
    return { 
      success: true, 
      message: `å·²æ¿€æ´» Agent: ${agentName}`,
      shouldResetChat: true
    };
  } catch (error) {
    return { success: false, message: `æ¿€æ´»å¤±è´¥: ${error.message}` };
  }
}
```

### 3.3 é…ç½®ç³»ç»Ÿé›†æˆ

#### 3.3.1 é…ç½®æ–‡ä»¶ç»“æ„
æ‰©å±•ç°æœ‰çš„é…ç½®ç³»ç»Ÿï¼š

```typescript
interface AgentConfig {
  id: string;
  name: string;
  description: string;
  systemInstruction: string;
  tags: string[];
  createdAt: Date;
  lastUsed: Date;
  usageCount: number;
}

interface AgentSettings {
  agents: Record<string, AgentConfig>;
  activeAgentId: string | null;
  defaultTemplates: AgentTemplate[];
}
```

#### 3.3.2 å­˜å‚¨ä½ç½®
```
~/.gemini/
â”œâ”€â”€ config.yaml          # ç°æœ‰é…ç½®
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ agents.json      # Agent é…ç½®ç´¢å¼•
â”‚   â”œâ”€â”€ templates/       # é¢„è®¾æ¨¡æ¿
â”‚   â””â”€â”€ custom/          # ç”¨æˆ·è‡ªå®šä¹‰ Agent
â””â”€â”€ sessions/
    â””â”€â”€ agent-sessions/  # Agent ä¼šè¯å†å²
```

## 4. ç”¨æˆ·ç•Œé¢è®¾è®¡

### 4.1 CLI ç•Œé¢å¢å¼º

#### 4.1.1 çŠ¶æ€æŒ‡ç¤ºå™¨
```
â”Œâ”€ Gemini CLI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent: Frontend Expert ğŸ¨                       â”‚
â”‚ Model: gemini-2.0-flash-exp                     â”‚
â”‚ Session: 15 turns                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.2 Agent åˆ—è¡¨æ˜¾ç¤º
```
/agent list

ğŸ“‹ Available Agents:

ğŸ¨ Frontend Expert
   Description: ä¸“æ³¨äºå‰ç«¯å¼€å‘çš„ AI åŠ©æ‰‹
   Last used: 2 hours ago
   Usage: 45 sessions

ğŸ—ï¸  Backend Architect  
   Description: åç«¯æ¶æ„è®¾è®¡ä¸“å®¶
   Last used: 1 day ago
   Usage: 23 sessions

ğŸš€ DevOps Engineer
   Description: éƒ¨ç½²å’Œè¿ç»´ä¸“å®¶
   Last used: 3 days ago
   Usage: 12 sessions
```

### 4.2 Agent åˆ›å»ºç•Œé¢

#### 4.2.1 äº¤äº’å¼åˆ›å»ºæµç¨‹
```
/agent create

ğŸ¤– Creating New Agent

ğŸ“ Name: Frontend Expert
ğŸ“„ Description: ä¸“æ³¨äºå‰ç«¯å¼€å‘å’Œç”¨æˆ·ä½“éªŒçš„ AI åŠ©æ‰‹
ğŸ·ï¸  Tags: frontend, react, typescript, ui/ux

ğŸ“‹ System Instruction:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ You are a senior frontend developer with 10+   â”‚
â”‚ years of experience in React, TypeScript, and  â”‚
â”‚ modern web technologies. You specialize in:    â”‚
â”‚                                                 â”‚
â”‚ - Component architecture and design patterns   â”‚
â”‚ - Performance optimization                      â”‚
â”‚ - Accessibility best practices                  â”‚
â”‚ - Modern CSS and styling solutions             â”‚
â”‚                                                 â”‚
â”‚ Always provide code examples and explain the   â”‚
â”‚ reasoning behind your recommendations.          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Agent created successfully!
```

### 4.3 æ¨¡æ¿é€‰æ‹©ç•Œé¢

#### 4.3.1 é¢„è®¾æ¨¡æ¿
```
/agent create --template

ğŸ¯ Choose a Template:

1. ğŸ¨ Frontend Expert
   - React/Vue/Angular specialist
   - UI/UX focused
   - Performance optimization

2. ğŸ—ï¸  Backend Architect
   - System design expert
   - Database optimization
   - API design patterns

3. ğŸš€ DevOps Engineer
   - CI/CD pipeline expert
   - Infrastructure as Code
   - Monitoring and logging

4. ğŸ”’ Security Specialist
   - Security best practices
   - Vulnerability assessment
   - Secure coding patterns

5. ğŸ“Š Data Engineer
   - Data pipeline design
   - ETL processes
   - Analytics and reporting

Select template (1-5): _
```

## 5. API è®¾è®¡

### 5.1 Agent ç®¡ç† API

#### 5.1.1 Agent CRUD æ“ä½œ

```typescript
interface AgentAPI {
  // åˆ›å»º Agent
  createAgent(config: CreateAgentRequest): Promise<AgentConfig>;
  
  // è·å– Agent åˆ—è¡¨
  listAgents(): Promise<AgentConfig[]>;
  
  // è·å–å•ä¸ª Agent
  getAgent(id: string): Promise<AgentConfig>;
  
  // æ›´æ–° Agent
  updateAgent(id: string, updates: Partial<AgentConfig>): Promise<AgentConfig>;
  
  // åˆ é™¤ Agent
  deleteAgent(id: string): Promise<void>;
  
  // æ¿€æ´» Agent
  activateAgent(id: string): Promise<void>;
  
  // åœç”¨ Agent
  deactivateAgent(): Promise<void>;
  
  // è·å–å½“å‰æ¿€æ´»çš„ Agent
  getActiveAgent(): Promise<AgentConfig | null>;
}
```

#### 5.1.2 è¯·æ±‚/å“åº”ç±»å‹å®šä¹‰

```typescript
interface CreateAgentRequest {
  name: string;
  description: string;
  systemInstruction: string;
  tags?: string[];
  templateId?: string;
}

interface AgentConfig {
  id: string;
  name: string;
  description: string;
  systemInstruction: string;
  tags: string[];
  createdAt: Date;
  lastUsed: Date;
  usageCount: number;
  isActive: boolean;
}

interface AgentTemplate {
  id: string;
  name: string;
  description: string;
  systemInstruction: string;
  tags: string[];
  category: 'builtin' | 'community' | 'custom';
}
```

### 5.2 é…ç½® API

#### 5.2.1 é…ç½®ç®¡ç†

```typescript
interface AgentConfigAPI {
  // å¯¼å‡º Agent é…ç½®
  exportAgent(id: string): Promise<AgentExport>;
  
  // å¯¼å…¥ Agent é…ç½®
  importAgent(config: AgentExport): Promise<AgentConfig>;
  
  // è·å–æ¨¡æ¿åˆ—è¡¨
  getTemplates(): Promise<AgentTemplate[]>;
  
  // åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿
  createTemplate(template: CreateTemplateRequest): Promise<AgentTemplate>;
}

interface AgentExport {
  version: string;
  agent: Omit<AgentConfig, 'id' | 'createdAt' | 'lastUsed' | 'usageCount'>;
  metadata: {
    exportedAt: Date;
    exportedBy: string;
    geminiCliVersion: string;
  };
}
```

## 6. æ•°æ®æ¨¡å‹

### 6.1 æ ¸å¿ƒæ•°æ®ç»“æ„

#### 6.1.1 Agent å®ä½“

```typescript
class Agent {
  public readonly id: string;
  public name: string;
  public description: string;
  public systemInstruction: string;
  public tags: string[];
  public readonly createdAt: Date;
  public lastUsed: Date;
  public usageCount: number;
  
  constructor(config: CreateAgentRequest) {
    this.id = generateId();
    this.name = config.name;
    this.description = config.description;
    this.systemInstruction = config.systemInstruction;
    this.tags = config.tags || [];
    this.createdAt = new Date();
    this.lastUsed = new Date();
    this.usageCount = 0;
  }
  
  public activate(): void {
    this.lastUsed = new Date();
    this.usageCount++;
  }
  
  public toConfig(): AgentConfig {
    return {
      id: this.id,
      name: this.name,
      description: this.description,
      systemInstruction: this.systemInstruction,
      tags: this.tags,
      createdAt: this.createdAt,
      lastUsed: this.lastUsed,
      usageCount: this.usageCount,
      isActive: false // ç”± AgentManager ç®¡ç†
    };
  }
}
```

#### 6.1.2 Agent ç®¡ç†å™¨

```typescript
class AgentManager {
  private agents: Map<string, Agent> = new Map();
  private activeAgentId: string | null = null;
  private storage: AgentStorage;
  private geminiClient: GeminiClient;
  
  constructor(storage: AgentStorage, geminiClient: GeminiClient) {
    this.storage = storage;
    this.geminiClient = geminiClient;
  }
  
  public async initialize(): Promise<void> {
    const configs = await this.storage.loadAgents();
    for (const config of configs) {
      const agent = Agent.fromConfig(config);
      this.agents.set(agent.id, agent);
    }
    
    this.activeAgentId = await this.storage.getActiveAgentId();
  }
  
  public async createAgent(request: CreateAgentRequest): Promise<Agent> {
    const agent = new Agent(request);
    this.agents.set(agent.id, agent);
    await this.storage.saveAgent(agent.toConfig());
    return agent;
  }
  
  public async activateAgent(id: string): Promise<void> {
    const agent = this.agents.get(id);
    if (!agent) {
      throw new Error(`Agent not found: ${id}`);
    }
    
    // åœç”¨å½“å‰ Agent
    if (this.activeAgentId) {
      await this.deactivateAgent();
    }
    
    // æ¿€æ´»æ–° Agent
    agent.activate();
    this.activeAgentId = id;
    
    // é‡ç½®èŠå¤©ä¼šè¯
    await this.geminiClient.resetChat();
    
    // æŒä¹…åŒ–çŠ¶æ€
    await this.storage.setActiveAgentId(id);
    await this.storage.saveAgent(agent.toConfig());
  }
  
  public async deactivateAgent(): Promise<void> {
    this.activeAgentId = null;
    await this.geminiClient.resetChat();
    await this.storage.setActiveAgentId(null);
  }
  
  public getActiveAgent(): Agent | null {
    return this.activeAgentId ? this.agents.get(this.activeAgentId) || null : null;
  }
}
```

### 6.2 å­˜å‚¨å±‚è®¾è®¡

#### 6.2.1 å­˜å‚¨æ¥å£

```typescript
interface AgentStorage {
  // Agent CRUD
  saveAgent(config: AgentConfig): Promise<void>;
  loadAgent(id: string): Promise<AgentConfig | null>;
  loadAgents(): Promise<AgentConfig[]>;
  deleteAgent(id: string): Promise<void>;
  
  // æ¿€æ´»çŠ¶æ€ç®¡ç†
  setActiveAgentId(id: string | null): Promise<void>;
  getActiveAgentId(): Promise<string | null>;
  
  // æ¨¡æ¿ç®¡ç†
  saveTemplate(template: AgentTemplate): Promise<void>;
  loadTemplates(): Promise<AgentTemplate[]>;
}
```

#### 6.2.2 æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨å®ç°

```typescript
class FileSystemAgentStorage implements AgentStorage {
  private readonly agentsDir: string;
  private readonly configFile: string;
  
  constructor(baseDir: string) {
    this.agentsDir = path.join(baseDir, 'agents');
    this.configFile = path.join(this.agentsDir, 'config.json');
  }
  
  public async saveAgent(config: AgentConfig): Promise<void> {
    await fs.ensureDir(this.agentsDir);
    const agentFile = path.join(this.agentsDir, `${config.id}.json`);
    await fs.writeJson(agentFile, config, { spaces: 2 });
  }
  
  public async loadAgents(): Promise<AgentConfig[]> {
    try {
      const files = await fs.readdir(this.agentsDir);
      const agentFiles = files.filter(f => f.endsWith('.json') && f !== 'config.json');
      
      const agents: AgentConfig[] = [];
      for (const file of agentFiles) {
        const agentPath = path.join(this.agentsDir, file);
        const config = await fs.readJson(agentPath);
        agents.push(config);
      }
      
      return agents;
    } catch (error) {
      return [];
    }
  }
  
  public async setActiveAgentId(id: string | null): Promise<void> {
    await fs.ensureDir(this.agentsDir);
    const config = await this.loadConfig();
    config.activeAgentId = id;
    await fs.writeJson(this.configFile, config, { spaces: 2 });
  }
  
  private async loadConfig(): Promise<{ activeAgentId: string | null }> {
    try {
      return await fs.readJson(this.configFile);
    } catch {
      return { activeAgentId: null };
    }
  }
}
```

## 7. å®ç°è·¯çº¿å›¾

### 7.1 ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ4-6 å‘¨ï¼‰

#### 7.1.1 åŸºç¡€æ¶æ„ï¼ˆ2 å‘¨ï¼‰
- [ ] æ‰©å±• `getCoreSystemPrompt` å‡½æ•°æ”¯æŒ Agent ä¸Šä¸‹æ–‡
- [ ] å®ç° `AgentManager` ç±»å’ŒåŸºç¡€ Agent ç®¡ç†é€»è¾‘
- [ ] é›†æˆåˆ°ç°æœ‰çš„ `GeminiClient` å’Œä¼šè¯ç®¡ç†ç³»ç»Ÿ
- [ ] å®ç°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨å±‚

#### 7.1.2 å‘½ä»¤ç³»ç»Ÿï¼ˆ1 å‘¨ï¼‰
- [ ] æ‰©å±•æ–œæ å‘½ä»¤å¤„ç†å™¨æ”¯æŒ Agent å‘½ä»¤
- [ ] å®ç° `/agent activate` å’Œ `/agent clear` å‘½ä»¤
- [ ] å®ç° `/agent list` å‘½ä»¤
- [ ] æ·»åŠ  CLI çŠ¶æ€æŒ‡ç¤ºå™¨æ˜¾ç¤ºå½“å‰æ¿€æ´»çš„ Agent

#### 7.1.3 Agent åˆ›å»ºä¸ç®¡ç†ï¼ˆ1-2 å‘¨ï¼‰
- [ ] å®ç° `/agent create` å‘½ä»¤å’Œäº¤äº’å¼åˆ›å»ºæµç¨‹
- [ ] å®ç° `/agent edit` å’Œ `/agent delete` å‘½ä»¤
- [ ] æ·»åŠ  Agent é…ç½®éªŒè¯å’Œé”™è¯¯å¤„ç†
- [ ] å®ç°åŸºç¡€çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½

### 7.2 ç¬¬äºŒé˜¶æ®µï¼šå¢å¼ºåŠŸèƒ½ï¼ˆ3-4 å‘¨ï¼‰

#### 7.2.1 æ¨¡æ¿ç³»ç»Ÿï¼ˆ2 å‘¨ï¼‰
- [ ] è®¾è®¡å’Œå®ç°é¢„è®¾ Agent æ¨¡æ¿
- [ ] å®ç°æ¨¡æ¿é€‰æ‹©å’Œåº”ç”¨åŠŸèƒ½
- [ ] åˆ›å»ºå¸¸ç”¨ä¸“ä¸šè§’è‰²æ¨¡æ¿ï¼ˆå‰ç«¯ã€åç«¯ã€DevOps ç­‰ï¼‰
- [ ] æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿åˆ›å»ºå’Œåˆ†äº«

#### 7.2.2 ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆ1-2 å‘¨ï¼‰
- [ ] æ”¹è¿› CLI ç•Œé¢æ˜¾ç¤ºå’Œäº¤äº’ä½“éªŒ
- [ ] æ·»åŠ  Agent ä½¿ç”¨ç»Ÿè®¡å’Œåˆ†æ
- [ ] å®ç° Agent æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½
- [ ] æ·»åŠ é…ç½®å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½

### 7.3 ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆ2-3 å‘¨ï¼‰

#### 7.3.1 åä½œåŠŸèƒ½ï¼ˆ1-2 å‘¨ï¼‰
- [ ] å®ç° Agent é…ç½®çš„å›¢é˜Ÿå…±äº«æœºåˆ¶
- [ ] æ”¯æŒä»è¿œç¨‹ä»“åº“å¯¼å…¥ Agent æ¨¡æ¿
- [ ] æ·»åŠ  Agent ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½
- [ ] å®ç° Agent é…ç½®çš„åŒæ­¥å’Œæ›´æ–°

#### 7.3.2 é›†æˆä¼˜åŒ–ï¼ˆ1 å‘¨ï¼‰
- [ ] ä¼˜åŒ–ç³»ç»Ÿæç¤ºè¯çš„ç»„åˆå’Œä¼˜å…ˆçº§é€»è¾‘
- [ ] å®ç° Agent ä¸Šä¸‹æ–‡çš„æ™ºèƒ½ç¼“å­˜
- [ ] æ·»åŠ  Agent æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
- [ ] å®Œå–„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### 7.4 ç¬¬å››é˜¶æ®µï¼šæµ‹è¯•ä¸å‘å¸ƒï¼ˆ2-3 å‘¨ï¼‰

#### 7.4.1 æµ‹è¯•è¦†ç›–ï¼ˆ1-2 å‘¨ï¼‰
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒåŠŸèƒ½
- [ ] å®ç°é›†æˆæµ‹è¯•éªŒè¯ç«¯åˆ°ç«¯æµç¨‹
- [ ] è¿›è¡Œç”¨æˆ·ä½“éªŒæµ‹è¯•å’Œåé¦ˆæ”¶é›†
- [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–

#### 7.4.2 æ–‡æ¡£ä¸å‘å¸ƒï¼ˆ1 å‘¨ï¼‰
- [ ] ç¼–å†™ç”¨æˆ·æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- [ ] åˆ›å»º Agent æ¨¡æ¿å¼€å‘æŒ‡å—
- [ ] å‡†å¤‡å‘å¸ƒè¯´æ˜å’Œè¿ç§»æŒ‡å—
- [ ] æ­£å¼å‘å¸ƒå’Œç¤¾åŒºæ¨å¹¿

## 8. é£é™©è¯„ä¼°ä¸ç¼“è§£

### 8.1 æŠ€æœ¯é£é™©

#### 8.1.1 ç³»ç»Ÿæç¤ºè¯å†²çª
**é£é™©**ï¼šä¸åŒ Agent çš„ç³»ç»ŸæŒ‡ä»¤å¯èƒ½ä¸åŸºç¡€ç³»ç»Ÿæç¤ºè¯äº§ç”Ÿå†²çª
**ç¼“è§£**ï¼š
- å®ç°ç³»ç»ŸæŒ‡ä»¤çš„ä¼˜å…ˆçº§å’Œåˆå¹¶ç­–ç•¥
- æä¾›æŒ‡ä»¤å†²çªæ£€æµ‹å’Œè­¦å‘Šæœºåˆ¶
- å»ºç«‹æœ€ä½³å®è·µæŒ‡å—

#### 8.1.2 æ€§èƒ½å½±å“
**é£é™©**ï¼šé¢‘ç¹çš„ä¼šè¯é‡ç½®å¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒ
**ç¼“è§£**ï¼š
- ä¼˜åŒ–ä¼šè¯é‡ç½®é€»è¾‘ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡ç½®
- å®ç°æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- æä¾›å¼‚æ­¥å¤„ç†é€‰é¡¹

### 8.2 ç”¨æˆ·ä½“éªŒé£é™©

#### 8.2.1 å­¦ä¹ æˆæœ¬
**é£é™©**ï¼šæ–°åŠŸèƒ½å¢åŠ ç”¨æˆ·å­¦ä¹ æˆæœ¬
**ç¼“è§£**ï¼š
- æä¾›ç›´è§‚çš„äº¤äº’å¼åˆ›å»ºæµç¨‹
- åˆ›å»ºä¸°å¯Œçš„é¢„è®¾æ¨¡æ¿
- ç¼–å†™è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£å’Œæ•™ç¨‹

#### 8.2.2 é…ç½®å¤æ‚æ€§
**é£é™©**ï¼šAgent é…ç½®è¿‡äºå¤æ‚å¯¼è‡´ç”¨æˆ·å›°æƒ‘
**ç¼“è§£**ï¼š
- æä¾›ç®€åŒ–çš„åˆ›å»ºæµç¨‹
- å®ç°é…ç½®éªŒè¯å’Œæ™ºèƒ½æç¤º
- æ”¯æŒä»æ¨¡æ¿å¿«é€Ÿåˆ›å»º

### 8.3 ç»´æŠ¤é£é™©

#### 8.3.1 å‘åå…¼å®¹æ€§
**é£é™©**ï¼šæ–°åŠŸèƒ½å¯èƒ½ç ´åç°æœ‰ç”¨æˆ·çš„å·¥ä½œæµ
**ç¼“è§£**ï¼š
- ä¿æŒç°æœ‰ API çš„å‘åå…¼å®¹æ€§
- æä¾›å¹³æ»‘çš„è¿ç§»è·¯å¾„
- å®ç°åŠŸèƒ½å¼€å…³æ§åˆ¶

#### 8.3.2 é…ç½®ç®¡ç†å¤æ‚æ€§
**é£é™©**ï¼šAgent é…ç½®ç®¡ç†å¢åŠ ç³»ç»Ÿå¤æ‚æ€§
**ç¼“è§£**ï¼š
- é‡‡ç”¨æ¸…æ™°çš„é…ç½®æ–‡ä»¶ç»“æ„
- å®ç°è‡ªåŠ¨åŒ–çš„é…ç½®éªŒè¯
- æä¾›é…ç½®ä¿®å¤å’Œæ¢å¤å·¥å…·

## 9. æˆåŠŸæŒ‡æ ‡

### 9.1 åŠŸèƒ½æŒ‡æ ‡
- [ ] Agent åˆ›å»ºæˆåŠŸç‡ > 95%
- [ ] Agent æ¿€æ´»å“åº”æ—¶é—´ < 2 ç§’
- [ ] é…ç½®å¯¼å…¥å¯¼å‡ºæˆåŠŸç‡ > 98%
- [ ] ç³»ç»Ÿç¨³å®šæ€§ï¼šæ— å›  Agent åŠŸèƒ½å¯¼è‡´çš„å´©æºƒ

### 9.2 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- [ ] ç”¨æˆ· Agent åˆ›å»ºå®Œæˆç‡ > 80%
- [ ] å¹³å‡æ¯ç”¨æˆ·åˆ›å»º Agent æ•°é‡ > 2
- [ ] Agent åŠŸèƒ½ä½¿ç”¨ç‡ > 60%ï¼ˆåœ¨å¯ç”¨ç”¨æˆ·ä¸­ï¼‰
- [ ] ç”¨æˆ·æ»¡æ„åº¦è¯„åˆ† > 4.0/5.0

### 9.3 ä¸šåŠ¡æŒ‡æ ‡
- [ ] åŠŸèƒ½é‡‡ç”¨ç‡ï¼š30% çš„æ´»è·ƒç”¨æˆ·ä½¿ç”¨ Agent åŠŸèƒ½
- [ ] ç”¨æˆ·ç•™å­˜ç‡æå‡ï¼šä½¿ç”¨ Agent åŠŸèƒ½çš„ç”¨æˆ· 7 å¤©ç•™å­˜ç‡æå‡ 15%
- [ ] ç¤¾åŒºè´¡çŒ®ï¼šç¤¾åŒºè´¡çŒ®çš„ Agent æ¨¡æ¿æ•°é‡ > 50

## 10. æ€»ç»“

Gemini CLI Agent åŠŸèƒ½å°†ä¸ºç”¨æˆ·æä¾›å¼ºå¤§çš„ AI åŠ©æ‰‹å®šåˆ¶èƒ½åŠ›ï¼Œé€šè¿‡ä¸ç°æœ‰ç³»ç»Ÿçš„æ·±åº¦é›†æˆï¼Œå®ç°æ— ç¼çš„ä¸“ä¸šåŒ– AI ä½“éªŒã€‚è¯¥åŠŸèƒ½çš„å®ç°å°†æ˜¾è‘—æå‡ Gemini CLI çš„ä¸“ä¸šæ€§å’Œå®ç”¨æ€§ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·åœ¨å„ç§å¼€å‘åœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚

é€šè¿‡åˆ†é˜¶æ®µçš„å®ç°è®¡åˆ’å’Œå…¨é¢çš„é£é™©ç®¡ç†ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®ä¿åŠŸèƒ½çš„ç¨³å®šäº¤ä»˜å’Œè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚åŒæ—¶ï¼Œå¼€æ”¾çš„æ¨¡æ¿ç³»ç»Ÿå’Œåä½œåŠŸèƒ½å°†ä¿ƒè¿›ç¤¾åŒºçš„å‚ä¸å’Œè´¡çŒ®ï¼Œå½¢æˆè‰¯æ€§çš„ç”Ÿæ€å¾ªç¯ã€‚